[ui]
username = Casey McGinty <cmcginty@fb.com>
merge = p4merge
# log style (compact, default, changelog, status, ...)
style = compact

[extdiff]
cmd.p4merge = /Applications/p4merge.app/Contents/Resources/launchp4merge

[merge-tools]
p4merge.executable = /Applications/p4merge.app/Contents/Resources/launchp4merge
p4merge.args = $base $local $other $output
p4merge.binary = false
p4merge.checkchanged = true
p4merge.dirdiff = false
p4merge.gui = true
p4merge.premerge = true

[templatealias]
fb_rev = if(svnrev, 'r{svnrev}', rev)
subject = truncatelonglines(desc|firstline,72,"Â·")
blue  = '\x1B[34m'
cyan  = '\x1B[36m'
green = '\x1B[32m'
red = '\x1B[31m'
reset = '\x1B[0m'
shortlog = '{blue}{fb_rev}{reset} [{green}{date|age}{reset}] {subject}, {cyan}{author|person}{reset}\n'
fulllog = '{shortlog}\t{desc|strip|fill76|tabindent}\n\n'
fmods = "{file_mods % '{blue}M\t{file}\n'}"
fadds = "{file_adds % '{green}A\t{file}\n'}"
fdels = "{file_dels % '{red}R\t{file}\n'}"
namestatlog = '{shortlog}{fmods}{fadds}{fdels}\n'
fall = "{files % '{file}\n'}"
nameonlylog = '{shortlog}{fall}\n'

[alias]
# e.g commit --amend
bot     = prev --bottom
br      = bookmark
bra     = bookmark --all
cam     = amend
came    = amend --edit
cami    = amend --interactive
cm      = commit
cma     = amend
cmi     = commit --interactive
co      = checkout
di      = diff
drop    = hide
fetch   = pull
gg      = grep
lg      = log --template '{shortlog}'
lgf     = log --template '{fulllog}'
lgns    = log --template '{namestatlog}'
lgno    = log --template '{nameonlylog}'
lgm     = log
lgp     = log --patch
lgp1    = log --patch --limit 1
lgs     = log --stat
lgv     = log --template '{fulllog}'
ls      = manifest
pl      = pull --rebase -d master
pull    = pull --rebase -d master
slh     = sl --hidden
# rebase all local branches
rba     = rebase --dest master --rev 'draft()'
rbi     = histedit
rbib    = histedit -r bottom
rsh     = !(hg update --clean -r . && hg revert --all)
rt      = revert
rta     = revert --all
rti     = revert --interactive
sha     = identify
slh     = sl --hidden
slp     = sl --patch
sls     = sl --stat
sp      = sparse
svn     = log -l1 -T 'r{svnrev}\n'
top     = next --top
u       = undo
